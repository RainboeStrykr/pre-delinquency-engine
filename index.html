<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Pre-Delinquency Intervention Engine — Risk Dashboard</title>
  <meta name="description" content="Banking risk analytics dashboard for monitoring customers and predicting financial stress before delinquency." />
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <div class="app">
    <!-- ===== SIDEBAR ===== -->
    <aside class="sidebar">
      <div class="sidebar-brand">
        <h1>Pre-Delinquency<br>Intervention Engine</h1>
        <span>Credit Risk Analytics</span>
      </div>
      <nav class="sidebar-nav">
        <button class="nav-item active" data-view="overview">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="3" width="7" height="7" rx="1"/><rect x="14" y="3" width="7" height="7" rx="1"/><rect x="3" y="14" width="7" height="7" rx="1"/><rect x="14" y="14" width="7" height="7" rx="1"/></svg>
          <span>Overview</span>
        </button>
        <button class="nav-item" data-view="customers">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M22 21v-2a4 4 0 0 0-3-3.87"/><path d="M16 3.13a4 4 0 0 1 0 7.75"/></svg>
          <span>Customer Explorer</span>
        </button>
        <button class="nav-item" data-view="signals">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"/><line x1="12" y1="9" x2="12" y2="13"/><line x1="12" y1="17" x2="12.01" y2="17"/></svg>
          <span>Risk Signals</span>
        </button>
        <button class="nav-item" data-view="model">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="22 12 18 12 15 21 9 3 6 12 2 12"/></svg>
          <span>Model Insights</span>
        </button>
        <button class="nav-item" data-view="interventions">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/></svg>
          <span>Interventions</span>
        </button>
      </nav>
      <div class="sidebar-footer">
        <button class="nav-item">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="3"/><path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1-2.83 2.83l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-4 0v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83-2.83l.06-.06A1.65 1.65 0 0 0 4.68 15a1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1 0-4h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 2.83-2.83l.06.06A1.65 1.65 0 0 0 9 4.68a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 4 0v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 2.83l-.06.06A1.65 1.65 0 0 0 19.4 9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 0 4h-.09a1.65 1.65 0 0 0-1.51 1z"/></svg>
          <span>Settings</span>
        </button>
      </div>
    </aside>

    <!-- ===== MAIN ===== -->
    <div class="main">
      <!-- Header -->
      <header class="header">
        <div class="header-search">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="11" cy="11" r="8"/><line x1="21" y1="21" x2="16.65" y2="16.65"/></svg>
          <input type="text" id="searchInput" placeholder="Search Customer ID..." />
        </div>
        <div class="header-spacer"></div>
        <div class="header-controls">
          <div class="header-date">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></svg>
            <span>Jan 17, 2026 — Feb 16, 2026</span>
          </div>
          <div class="header-filter">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"/></svg>
            <select id="riskFilter">
              <option value="all">All Risk Levels</option>
              <option value="high">High Risk</option>
              <option value="medium">Medium Risk</option>
              <option value="low">Low Risk</option>
            </select>
          </div>
          <div class="header-profile" title="Analyst Profile">RA</div>
        </div>
      </header>

      <!-- Content -->
      <div class="content">
        <!-- ===== OVERVIEW VIEW ===== -->
        <div id="view-overview" class="view active">
          <!-- Portfolio Metrics -->
          <h2 class="section-title">Portfolio Overview</h2>
          <div class="metrics-row" id="metricsRow"></div>

          <!-- Charts -->
          <div class="charts-row">
            <div class="chart-card">
              <h3>Risk Distribution</h3>
              <div class="chart-container donut">
                <canvas id="donutChart"></canvas>
              </div>
            </div>
            <div class="chart-card">
              <h3>Risk Trend <span class="section-subtitle">Last 3 Months</span></h3>
              <div class="chart-container bar">
                <canvas id="trendChart"></canvas>
              </div>
            </div>
          </div>

          <!-- Customer Table -->
          <div class="customers-table-card">
            <div class="table-header">
              <h3>Customers at Risk</h3>
              <span class="badge" id="customerCountBadge">0 customers</span>
            </div>
            <table>
              <thead>
                <tr>
                  <th>Customer ID</th>
                  <th>Risk Score</th>
                  <th>Risk Level</th>
                  <th>Default Prob.</th>
                  <th>Salary Status</th>
                  <th>Next EMI</th>
                  <th>Action</th>
                </tr>
              </thead>
              <tbody id="customerTableBody"></tbody>
            </table>
          </div>
        </div>

        <!-- ===== CUSTOMER DETAIL VIEW ===== -->
        <div id="view-detail" class="view">
          <button class="detail-back" id="backBtn">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="19" y1="12" x2="5" y2="12"/><polyline points="12 19 5 12 12 5"/></svg>
            Back to Overview
          </button>

          <!-- Summary Card -->
          <div class="customer-summary" id="customerSummary"></div>

          <!-- Transactions + Stress Signals -->
          <div class="detail-grid">
            <!-- Transaction History -->
            <div class="panel">
              <div class="panel-header">
                <h3>Transaction History</h3>
              </div>
              <div class="panel-body">
                <div class="txn-filters" id="txnFilters"></div>
                <div class="txn-table-wrap">
                  <table>
                    <thead>
                      <tr>
                        <th>Date</th>
                        <th>Category</th>
                        <th>Amount</th>
                        <th>Balance</th>
                        <th>Status</th>
                      </tr>
                    </thead>
                    <tbody id="txnTableBody"></tbody>
                  </table>
                </div>
                <div class="detail-charts-row">
                  <div>
                    <h3 style="font-size:0.78rem;color:var(--gray-500);margin-bottom:8px;">Monthly Spend</h3>
                    <div class="detail-chart-container"><canvas id="spendChart"></canvas></div>
                  </div>
                  <div>
                    <h3 style="font-size:0.78rem;color:var(--gray-500);margin-bottom:8px;">Balance Trend</h3>
                    <div class="detail-chart-container"><canvas id="balanceChart"></canvas></div>
                  </div>
                </div>
              </div>
            </div>

            <!-- Stress Signals -->
            <div class="panel">
              <div class="panel-header">
                <h3>Financial Stress Signals</h3>
              </div>
              <div class="panel-body">
                <div class="stress-grid" id="stressGrid"></div>
              </div>
            </div>
          </div>

          <!-- SHAP + Interventions -->
          <div class="detail-grid">
            <!-- Model Explainability -->
            <div class="panel">
              <div class="panel-header">
                <h3>Model Explainability — SHAP</h3>
              </div>
              <div class="panel-body" id="shapPanel"></div>
            </div>

            <!-- Intervention Recommendations -->
            <div class="panel">
              <div class="panel-header">
                <h3>Intervention Recommendations</h3>
              </div>
              <div class="panel-body">
                <div class="intervention-list" id="interventionList"></div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Toast -->
  <div class="toast" id="toast"></div>

  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.7/dist/chart.umd.min.js"></script>
  <script src="app.js"></script>
</body>
</html>
